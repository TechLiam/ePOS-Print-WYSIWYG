<!--
  ePOS-Print WYSIWYG
  Copyright (c) 2026 Liam Wilson
  Licensed under the MIT License. See LICENSE file for details.
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ePOS-Print WYSIWYG</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="app.css">
    <script src="https://cdn.jsdelivr.net/npm/bwip-js@4.5.1/dist/bwip-js.min.js"></script>
    <script type="module" src="src/main.js"></script>
</head>
<body>
    <header>
        <div>
            <h1>ePOS-Print WYSIWYG</h1>
            <p>Interactive Editor by Liam Wilson</p>
        </div>
        <div id="header-utils">
            <button id="btn-help" title="How to use" aria-label="Show help and documentation">‚ùì</button>
            <button id="theme-toggle" title="Toggle Dark Mode" aria-label="Switch between light and dark theme">üåì</button>
            <button id="btn-share" title="Copy Shareable URL" aria-label="Copy a link to this receipt layout">üîó</button>
        </div>
    </header>

    <div id="main-container">
        <div id="editor-area">
            <div id="toolbar" role="toolbar" aria-label="Editor toolbar">
                <div id="toolbar-menu" role="menubar">
                    <div class="menu-group" role="group" aria-label="File and history">
                        <button type="button" id="btn-save" title="Save XML to file">Save</button>
                        <button type="button" id="btn-load" title="Load XML from file">Load</button>
                        <button type="button" id="btn-print" title="Send to network printer">Print</button>
                        <div class="toolbar-divider" aria-hidden="true"></div>
                        <button type="button" id="btn-undo" title="Undo (Ctrl+Z)" aria-label="Undo">‚Ü∂</button>
                        <button type="button" id="btn-redo" title="Redo (Ctrl+Y)" aria-label="Redo">‚Ü∑</button>
                        <div class="toolbar-divider" aria-hidden="true"></div>
                        <button type="button" id="zoom-out" title="Zoom Out" aria-label="Zoom out">‚àí</button>
                        <button type="button" id="zoom-in" title="Zoom In" aria-label="Zoom in">Ôºã</button>
                        <button type="button" id="zoom-reset" title="Reset Zoom">100%</button>
                        <input type="file" id="file-input" accept=".xml" style="display: none;" aria-hidden="true">
                    </div>
                    <div class="utils-group" role="group" aria-label="Utilities">
                        <button type="button" id="btn-copy-xml">Copy XML</button>
                        <button type="button" id="btn-clear-all">Clear All</button>
                    </div>
                </div>
                <div id="toolbar-main">
                    <div class="tabs-row">
                        <div class="tabs-header" role="tablist">
                            <button type="button" class="tab-link active" data-tab="tab-text" role="tab" aria-selected="true" aria-controls="tab-text">Text</button>
                            <button type="button" class="tab-link" data-tab="tab-graphics" role="tab" aria-selected="false" aria-controls="tab-graphics">Graphics</button>
                            <button type="button" class="tab-link" data-tab="tab-layout" role="tab" aria-selected="false" aria-controls="tab-layout">Layout</button>
                        </div>
                        <select id="paper-size-select" title="Change Paper Size" aria-label="Select paper width">
                            <option value="576">80mm (576 dots)</option>
                            <option value="420">58mm (420 dots)</option>
                            <option value="384">58mm (384 dots)</option>
                        </select>
                    </div>
                    <div class="tabs-content">
                        <div id="tab-text" class="tab-pane active">
                            <button type="button" data-type="text" title="Add text element">Text</button>
                            <button type="button" data-type="newline" title="Add new line character">New Line</button>
                        </div>
                        <div id="tab-graphics" class="tab-pane">
                            <button type="button" data-type="hline" title="Add horizontal line">H-Line</button>
                            <button type="button" data-type="barcode" title="Add barcode">Barcode</button>
                            <button type="button" data-type="symbol" title="Add 2D symbol/QR code">2D Symbol</button>
                            <button type="button" data-type="image" title="Add image">Image</button>
                            <button type="button" data-type="logo" title="Add stored logo">Logo</button>
                        </div>
                        <div id="tab-layout" class="tab-pane">
                            <button type="button" data-type="feed" title="Add paper feed">Feed</button>
                            <button type="button" data-type="cut" title="Add paper cut">Cut</button>
                        </div>
                    </div>
                </div>
            </div>
            <div id="canvas-container">
                <canvas id="preview"></canvas>
            </div>
            <textarea id="xml-input" placeholder="Enter ePOS-Print XML here..."></textarea>
        </div>

        <div id="properties-panel">
            <div id="properties-header">
                <h3 id="properties-title" tabindex="-1">Properties</h3>
                <button id="properties-close">√ó</button>
            </div>
            <div id="properties-content"></div>
            <div id="properties-footer" style="display: none;">
                <div class="properties-buttons">
                    <button type="button" id="properties-move-up" title="Move Up">Move Up ‚Üë</button>
                    <button type="button" id="properties-move-down" title="Move Down">Move Down ‚Üì</button>
                    <button type="button" id="properties-delete">Delete Element</button>
                </div>
                <p style="font-size: 0.8em; color: #666; margin-top: 10px;">Changes are applied instantly.</p>
            </div>
        </div>
    </div>

    <div id="help-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>How to Use</h3>
                <button id="help-close">√ó</button>
            </div>
            <div class="modal-body">
                <div class="help-section">
                    <h4>Basics</h4>
                    <ul>
                        <li><strong>Add:</strong> Use the <strong>Text</strong>, <strong>Graphics</strong>, and <strong>Layout</strong> tabs to add elements.</li>
                        <li><strong>Edit:</strong> Click any element on the preview to open its properties.</li>
                        <li><strong>Reorder:</strong> Use <strong>Move Up ‚Üë</strong> and <strong>Move Down ‚Üì</strong> in the properties panel.</li>
                        <li><strong>Files:</strong> Use <strong>Save</strong> and <strong>Load</strong> to export/import ePOS-Print XML files.</li>
                    </ul>
                </div>
                <div class="help-section">
                    <h4>Navigation</h4>
                    <ul>
                        <li><strong>Pan:</strong> Hold <kbd>Space</kbd> + <strong>Left Click</strong> or use <strong>Middle Click</strong>.</li>
                        <li><strong>Zoom:</strong> Use <kbd>+</kbd> / <kbd>‚àí</kbd> buttons or <kbd>Ctrl</kbd> + <strong>Mouse Wheel</strong>.</li>
                        <li><strong>Reset:</strong> Click <strong>100%</strong> to reset zoom and position.</li>
                    </ul>
                </div>
                <div class="help-section">
                    <h4>Keyboard Shortcuts</h4>
                    <ul>
                        <li><kbd>Ctrl</kbd>+<kbd>Z</kbd> / <kbd>Ctrl</kbd>+<kbd>Y</kbd> : Undo / Redo</li>
                        <li><kbd>Delete</kbd> / <kbd>Backspace</kbd> : Delete selected element</li>
                        <li><kbd>+</kbd> / <kbd>‚àí</kbd> : Zoom In / Out</li>
                        <li><kbd>Ctrl</kbd>+<kbd>0</kbd> : Reset Zoom</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div id="dialog-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="dialog-title">Alert</h3>
                <button id="dialog-close" aria-label="Close dialog">√ó</button>
            </div>
            <div class="modal-body">
                <p id="dialog-message"></p>
                <div id="dialog-input-container" style="display: none; margin-top: 15px;">
                    <input type="text" id="dialog-input" aria-label="Input value">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="dialog-cancel" style="display: none;">Cancel</button>
                <button type="button" id="dialog-ok">OK</button>
            </div>
        </div>
    </div>

    <div id="popup-overlay"></div>
</body>
</html>